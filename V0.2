#include "manobib.h"
#include "studentas.h"

void categorize_students(const string& input_filename) {
   
    vector<studentas> students = studentas::readFromFile(input_filename);

   
    vector<studentas> vargsiukai, kietiakiai;

  
    for (const auto& student : students) {
        if (student.getGalutinisVid() < 5.0) {
            vargsiukai.push_back(student);
        }
        else {
            kietiakiai.push_back(student);
        }
    }

   
    string vargsiukai_filename = "vargsiukai_" + input_filename;
    string kietiakiai_filename = "kietiakiai_" + input_filename;

    studentas::writeToFile(vargsiukai, vargsiukai_filename);
    studentas::writeToFile(kietiakiai, kietiakiai_filename);

    cout << "Processed " << input_filename << ": " << vargsiukai.size() << " VargÅ¡iukai, " << kietiakiai.size() << " Kietiakiai\n";
}

int main() {
 
    vector<string> input_files = {
        "studentai1000.txt",
        "studentai10000.txt",
        "studentai100000.txt",
        "studentai1000000.txt"
    };

 
    for (const auto& file : input_files) {
        categorize_students(file);
    }

    return 0;
}
